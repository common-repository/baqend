!function(e,t,n,r,i,o,a){"use strict";var s="baqend-speedkit",c=s+"-user-id",u=s+"-session-id",d=s+"-session-index",l=s+"-session-timestamp";function p(e,t,n,r){return Promise.resolve(e).then((function(e){return new Promise((function(i,o){var a=e.transaction(t,n),s=Promise.resolve(r(a.objectStore(t)));a.oncomplete=function(){return s.then(i)},a.onabort=a.onerror=function(){return o(a.error)}}))}))}function f(e,t,n){return p(e,t,"readwrite",n)}function g(e,t){return t&&"/"!==t?""+(""+(t.lastIndexOf("/")===t.length-1?t.substr(0,t.length-1):t))+((0===e.indexOf("/")?"":"/")+e):e}var v=function(){function e(e){this.dbp=null,this.cacheName=g(s,e),this.dbp=this.openDb()}return e.prototype.get=function(e){return(t=this.db(),n="baqend-speedkit-store",r=function(t){return t.get(e)},p(t,n,"readonly",r)).then((function(e){return e.result||null}));var t,n,r},e.prototype.set=function(e,t){return f(this.db(),"baqend-speedkit-store",(function(n){return n.put(t,e)&&void 0}))},e.prototype.clear=function(){return Promise.all([(e=this.db(),t="baqend-speedkit-store",f(e,t,(function(e){return e.clear()})).then((function(){})))]).then((function(){}));var e,t},e.prototype.disconnect=function(){var e=this;return this.dbp?this.dbp.then((function(t){e.dbp=null,t.close()})):Promise.resolve()},e.prototype.db=function(){return this.dbp||(this.dbp=this.openDb()),this.dbp},e.prototype.openDb=function(){var e=this,t=indexedDB.open(this.cacheName,1);return t.onupgradeneeded=function(e){var n=e.oldVersion,r=t.result;if(n<1){if(!r)return;try{r.createObjectStore("baqend-speedkit-store")}catch(i){}}},this.openRequest(t).then((function(t){return t.onclose=function(){e.dbp=null},t.onerror=function(){e.dbp=null},t.onversionchange=function(n){n.newVersion||(e.dbp=null,t.close())},t}))},e.prototype.openRequest=function(e){return new Promise((function(t,n){e.onsuccess=function(){return t(e.result)},e.onerror=function(){return n(e.error)},e.onblocked=function(){return n(e.error)}}))},e}();!function(){function e(){this.map=new Map}e.prototype.get=function(e){return Promise.resolve(this.map.get(e)||null)},e.prototype.set=function(e,t){return this.map.set(e,t),Promise.resolve()},e.prototype.clear=function(){return this.map.clear(),Promise.resolve()}}();function h(t){"complete"!==e.readyState?window.addEventListener("load",(function(){return t()})):t()}var m=1e5;function y(e,n){var r=function(e,t){void 0===t&&(t=m);var n=JSON.stringify(e),r=n.length;if(r<=t)return[e,n];var i=[],o=[];Object.keys(e).forEach((function(t){var n=JSON.stringify(e[t]);i.push({name:t,size:n.length})})),i.sort((function(e,t){return t.size-e.size}));for(var a=0;r>t&&i[a];)delete e[i[a].name],r-=i[a].size,o.push(i[a].name),a+=1;return e.truncatedKeys=o,[e,JSON.stringify(e)]}(n),i=r[0],o=r[1];try{if(t.sendBeacon&&t.sendBeacon(e,o))return}catch(c){}i.xhrFallback=!0;var a=JSON.stringify(i),s=new XMLHttpRequest;s.open("POST",e,!0),s.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),s.send(a)}function S(e,t){return!(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))&&!(typeof e!=typeof t)&&(Array.isArray(e)?e.length===t.length:"object"==typeof e?function(e,t){var n=0,r=0;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&(n+=1,!S(e[i],t[i])))return!1;for(var i in t)r+=1;return n===r}(e,t):e===t)}function w(t){"loading"===e.readyState?e.addEventListener("DOMContentLoaded",(function(){return t()})):setTimeout(t,0)}function b(t){e.querySelector("html.speed-kit-dynamic-loaded")?setTimeout(t,0):e.addEventListener("speed-kit-loaded",(function(){return t()}))}function k(e){return void 0===e&&(e=25),function(e){var t=[];t.length=e;var n=0;for(;n<e;)t[n]=0,n+=1;return t}(e).map((function(){return Math.floor(62*Math.random())})).map((function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[e]})).join("")}function T(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};return e.forEach((function(e){Object.keys(e).forEach((function(t){return n[t]=e[t]}))})),n}var I={performanceOnly:!1,stripAllParameter:!1,noCookies:!1,noTracking:!1,pageDisabled:!1,dataLayer:"dataLayer"};function N(){var e=T({},I);return r.rumTracking?"boolean"==typeof r.rumTracking?e:T(e,r.rumTracking):T(e,{noTracking:!0})}function C(e){var t=null;if("undefined"!=typeof Storage)try{t=localStorage.getItem(e)}catch(n){}return t}function E(e){void 0===e&&(e=!0);var t,n=e?k():"",r=0;if((t=C(l))&&(Date.now()-parseInt(t,10))/1e3<=1800){n=C(u);var i=""+(C(d)||-1);r=parseInt(i,10)+1}return[n,r]}function P(e,t){if("undefined"!=typeof Storage)try{localStorage.setItem(e,t)}catch(n){}}var L,O=[c,"baqend-speedkit-config"];function D(){return!("1"!==C("baqend-speedkit-sk-opt-out")&&!window.deactivateSpeedKit)}function R(t,n){if(!(D()||(P(t,n),N().noCookies||O.indexOf(t)<0))){var i=r.cookieLifetime||180,o=new Date(Date.now()+24*i*60*60*1e3).toUTCString();try{e.cookie=t+"="+n+"; expires="+o+"; path=/; SameSite=Lax; Secure"}catch(a){}}}function A(t,n){void 0===n&&(n=!0);var r=C(t),i=function(t){try{var n=new RegExp(t+"=([^,;]*)"),r=e.cookie.match(n);return r&&r[1]?r[1]:null}catch(i){}return null}(t),o=function(e){if(null===e||"null"===e||""===e||"[object Object]"===e)return!1;if(/^-?\d+(\.\d+)?$/.test(e))return!0;try{var t=decodeURIComponent(e);return JSON.parse(t),!0}catch(r){var n=/^[a-zA-Z0-9\s]+$/.test(e);return n||B(r,L.SNIPPET),n}}(r)?r:i;return o&&r!==i&&n&&R(t,o),o}function x(e){return void 0===e&&(e=!0),A(c,e)||k()}function U(e){return"reason"in e}function B(e,t){!function(){if(window.SpeedKit&&window.SpeedKit.track)return;var e=N(),t=!(e.noTracking||e.performanceOnly);if(window.SpeedKit=window.SpeedKit||{},window.SpeedKit.navigateId=window.SpeedKit.navigateId||""+k(32),window.SpeedKit.group=window.SpeedKit.group||"sk",window.SpeedKit.track=K,!window.SpeedKit.sessionId&&t){var n=E(),r=n[0],i=n[1];window.SpeedKit.sessionId=r,window.SpeedKit.sessionIndex=i}t&&(window.SpeedKit.userId=window.SpeedKit.userId||x())}();var n={timestamp:Date.now(),type:t,message:"Install.js",stackTrace:"null"};if(function(e){return!!e&&"object"==typeof e&&null!==e&&("reason"in e||"message"in e)}(e)){var r=U(e)?e.reason.message||JSON.stringify(e.reason):e.message,i=U(e)?e.reason.stack:e.stack;n.message="Install.js: "+r,n.stackTrace=i||"null"}!function(e){F("jsErrors",[e])}(n)}function K(e,t,n){F("events",[{action:""+e,label:""+t,value:isNaN(Number(n))?0:Number(n),ts:performance.now()}])}function F(e,t){var n=N();if(!n.noTracking){var i={sessionId:SpeedKit.sessionId,userId:SpeedKit.userId},o={piId:SpeedKit.navigateId,testGroup:SpeedKit.group};o[e]=t;var a=n.performanceOnly?o:T(o,i);y("https://"+(r.appDomain||"{}.app.baqend.com".replace("{}",r.appName))+"/v1"+"/rum/pi",a)}}!function(e){e.SNIPPET="snippet",e.CONFIG="skConfig",e.RUMPLUGIN="rum",e.JSTRACKINGPLUGIN="js",e.DFCONFIG="dfConfig",e.MERGE="merge",e.CHANGEDETECTION="cd",e.DYNAMICFETCHER="df",e.BLOCKINGNOTRELEASED="blockingScriptNotReleased",e.MAINNOTMERGED="mainNotMerged",e.SERVICEWORKER="sw"}(L||(L={}));var G=function(){function e(e){this.dataLayerEventListeners=[],this.dataLayerUpdateListeners=[],this.observedDataLayerEvents=[],this.seenIndices=[],this.dataLayerName=e}return e.prototype.onDataLayer=function(e){var t=this;this.dataLayerEventListeners.length||this.observeDataLayer((function(e,n){var r,i,o=window[t.dataLayerName];if(n&&(r=t.seenIndices).push.apply(r,n),Object.keys(o).filter((function(e){return!isNaN(Number(e))&&-1===t.seenIndices.indexOf(e)})).forEach((function(n){e.push(o[Number(n)]),t.seenIndices.push(n)})),e.length){(i=t.observedDataLayerEvents).push.apply(i,e);for(var a=0,s=t.dataLayerEventListeners;a<s.length;a++){var c=s[a];t.emitEventsToObserver(e,c)}}})),this.dataLayerEventListeners.push(e),this.emitEventsToObserver(this.observedDataLayerEvents,e)},e.prototype.emitEventsToObserver=function(e,t){for(var n=function(e){if(!e)return"continue";setTimeout((function(){return t(e)}))},r=0,i=e;r<i.length;r++){n(i[r])}},e.prototype.observeDataLayer=function(e){var t=this;this.onDataLayerReady((function(n){var r=n.push;n.push=function push(){var t=n.length,i=Array.prototype.slice.call(arguments),o=r.apply(n,i),a=Object.keys(n).filter((function(e){return!isNaN(Number(e))&&Number(e)>=t}));return e(i,a),o},t.seenIndices=Object.keys(n).filter((function(e){return!isNaN(Number(e))})),e(n)}))},e.prototype.onDataLayerReady=function(e){this.dataLayerUpdateListeners.length||this.startDataLayerObserver(),this.dataLayerUpdateListeners.push(e);var t=window[this.dataLayerName];t&&e(t)},e.prototype.startDataLayerObserver=function(){var e=this,t=Object.getOwnPropertyDescriptor(window,this.dataLayerName),n=this.dataLayerUpdateListeners,r=window[this.dataLayerName],i=function(e){var t=r!==e;r=e,t&&e&&setTimeout((function(){n.forEach((function(t){return t(e)}))}))};if(!t||t.configurable)try{Object.defineProperty(window,this.dataLayerName,{configurable:!0,enumerable:!0,get:function(){return r},set:function(e){i(e)}})}catch(o){B(o,L.SNIPPET)}else setInterval((function(){i(window[e.dataLayerName])}),500)},e}(),q=function(){function e(e){this.rumController=e,this.triggerFunctions={domInteractive:this.rumController.onDOMInteractive,load:this.rumController.onLoad,speedKitLoaded:this.rumController.onSpeedKitLoaded,dataLayer:this.rumController.onDataLayer.bind(this.rumController),dataLayerReady:this.rumController.onDataLayerReady.bind(this.rumController),visibilityHidden:this.rumController.onVisibilityHidden,dfDataReady:this.rumController.onDfDataReady,leavePage:this.rumController.onLeavePage.bind(this.rumController),gaReady:this.rumController.onGaReady.bind(this.rumController),gaTracking:this.rumController.onGaTracking.bind(this.rumController),click:this.rumController.onClick,nextTick:this.rumController.onNextTick,softNavigation:this.rumController.onSoftNavigation.bind(this.rumController),bfCacheNavigation:this.rumController.onBFCacheNavigation}}return e.prototype.initPlugin=function(e){if(e.shouldExecute)try{if(!e.shouldExecute())return}catch(n){B(n,L.RUMPLUGIN)}e.type||(e.type="Data");"string"==typeof e.on?e.on=this.triggerFunctions[e.on]||this.getUnknownTriggerFunction(e.on):e.on=e.on||function(e){return e()};var t=this.generateCallbackFunction(e);try{e.on(t,this.rumController)}catch(n){B(n,L.RUMPLUGIN)}},e.prototype.generateCallbackFunction=function(e){var t=this;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e.track){var i=[t.rumController].concat(n);try{e.track.apply(e,i)}catch(c){B(c,L.RUMPLUGIN)}}else if(e.key&&(e.set||e.append||e.setTiming)){var o,a=t.getControllerFunction(e),s=t.getTrackingFunction(e);try{o=s.apply(e,n)}catch(c){B(c,L.RUMPLUGIN)}null!=o&&a.call(t.rumController,e.key,o)}}},e.prototype.getControllerFunction=function(e){return e.setTiming?this.rumController.setTiming:e.set?this.rumController.set:this.rumController.append},e.prototype.getTrackingFunction=function(e){return e.setTiming||e.set||e.append},e.prototype.getUnknownTriggerFunction=function(e){var t=this,n=function(r){null!==t.resolvePluginVariable(e)?r():setTimeout((function(){return n(r)}),200)};return n},e.prototype.resolvePluginVariable=function(e){for(var t=e.replace(/\[(\w+)\]/g,".$1"),n=(t=t.replace(/^\./,"")).split("."),r=window,i=0,o=n;i<o.length;i++){var a=o[i];if("object"!=typeof r||null==r)break;r=r[a]}return r||null},e}();function M(t){e.addEventListener("visibilitychange",(function(){"hidden"===e.visibilityState&&t()}),!0)}function j(t){SpeedKit&&SpeedKit.dynamicBlocks&&SpeedKit.dynamicBlocks.complete&&SpeedKit.dynamicBlocks.dataComplete||!e.querySelector("html.speed-kit-dynamic-loading")?setTimeout(t,0):e.addEventListener("dynamic-fetcher-data-ready",(function(){return t()}))}var H=function(){function t(){this.callbacks=[],this.unloaded=!1}return t.prototype.init=function(){var t=this;e.addEventListener("visibilitychange",(function(){"hidden"===e.visibilityState?t.prepareBeforeLeaving("visibilityChange"):"visible"===e.visibilityState&&(t.unloaded=!1)})),"onpagehide"in window?window.addEventListener("pagehide",(function(){return t.prepareBeforeLeaving("pagehide")})):(window.addEventListener("beforeunload",(function(){return t.prepareBeforeLeaving("beforeunload")})),window.addEventListener("unload",(function(){return t.prepareBeforeLeaving("unload")})))},t.prototype.onLeavePage=function(e){this.callbacks.push(e)},t.prototype.executeRemainingCallbacks=function(){if(!this.unloaded)for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])()}},t.prototype.prepareBeforeLeaving=function(e){var t=SpeedKit;this.executeRemainingCallbacks(),Se(t,e),this.unloaded=!0},t.prototype.isUnloaded=function(){return this.unloaded},t}(),W=function(){function e(){this.gaObserver=[]}return e.prototype.onGaTracking=function(e){if(!this.gaObserver.length){var t=this.gaObserver;this.observeGa((function(){for(var e=0,n=t;e<n.length;e++){var r=n[e];r.apply({},arguments)}}))}this.gaObserver.push(e)},e.prototype.onGaReady=function(e){w(this.waitForGa.bind(this,e))},e.prototype.observeGa=function(e){w(this.initGa.bind(this,e))},e.prototype.initGa=function(){var e=this,t=arguments[0];this.waitForGa((function(){window.ga.getAll().forEach((function(n){var r=n.get("sendHitTask");n.set("sendHitTask",(function(n){r.call(e,n),t.call(e,n)}))}))}))},e.prototype.waitForGa=function(e){var t=this,n=window.ga;n?n((function(){return e()})):setTimeout((function(){return t.waitForGa(e)}),500)},e}();function V(e){return e.className?"object"==typeof e.className?e.className.animVal:e.className:""}function J(e){return e.getAttribute("formAction")||e.getAttribute("action")||e.getAttribute("href")||e.getAttribute("src")||e.getAttribute("code")||e.getAttribute("codebase")||""}function z(e){window.addEventListener("click",(function(t){if(t.isTrusted){var n,r=t.target;r&&e({element:n=r,elementClasses:V(n),elementId:n.getAttribute("for")||n.id||"",elementTarget:n.getAttribute("formTarget")||n.getAttribute("target")||"",elementUrl:J(n)},function(e){return{clientX:e.clientX,clientY:e.clientY}}(t))}}),{passive:!0,capture:!0})}function Y(e){setTimeout(e,0)}var X,$=function(){function e(){this.callbacks=[],this.currentUrl=location.href,"undefined"!=typeof URL&&this.init()}return e.prototype.init=function(){var e=this,t=window.history.pushState,n=window.history.replaceState,r=function(t){try{e.triggerHistoryChange(t)}catch(n){B(n,L.RUMPLUGIN)}};window.history.pushState=function(){var e=Array.prototype.slice.call(arguments);t.apply(window.history,e);var n=e[2];n&&r(n)},window.history.replaceState=function(){var e=Array.prototype.slice.call(arguments);n.apply(window.history,e);var t=e[2];t&&r(t)},window.addEventListener("popstate",(function(e){r(window.location.href)}))},e.prototype.onSoftNavigation=function(e){this.callbacks.push(e)},e.prototype.triggerCallbacks=function(){var e=this;setTimeout((function(){for(var t=0,n=e.callbacks;t<n.length;t++){var r=n[t];try{r()}catch(i){B(i,L.RUMPLUGIN)}}}),0)},e.prototype.triggerHistoryChange=function(e){var t=new URL(e,location.href),n=new URL(this.currentUrl,location.href);this.currentUrl=t.href,t.hash="",n.hash="",t.href!==n.href&&this.triggerCallbacks()},e}();function _(e){window.addEventListener("pageshow",(function(t){t.persisted&&setTimeout(e,0)}))}function Z(e,t){void 0===t&&(t="");try{if("BODY"===e.tagName||e.id)return((e.id?[e.tagName,e.id].join("#"):e.tagName)+" "+t).trim();for(var n="",r=0;r<e.classList.length;r+=1)n+="."+e.classList[r];return n=("> "+e.tagName+n+" "+t).trim(),e.parentElement?Z(e.parentElement,n):n}catch(i){return null}}!function(e){e.Override="override",e.Append="append",e.Force="force",e.Once="once"}(X||(X={}));var Q,ee,te,ne,re,ie,oe,ae,se,ce=function(){function e(e,t,n){var r=this;this.beaconIndex=0,this.sendingScheduled=!1,this.init=this.getInit(e,t),this.sentTracking=Object.create(this.init),this.unsentTracking={},this.customTimers={},this.shouldTrackPI=n,this.dataLayerHandler=new G(N().dataLayer),this.leavePageHandler=new H,this.historyHandler=new $,this.gATrackingHandler=new W,this.customDimensions=[{name:"customPiDimensions",type:"PiDimension",dimensionData:{}},{name:"customSessionDimensions",type:"SessionDimension",dimensionData:{}}],this.enforcedTopLevelAttributes=[{key:"pageType",defaultValue:"None"}],this.onDOMInteractive=w,this.onLoad=h,this.onSpeedKitLoaded=b,this.onGaReady=this.gATrackingHandler.onGaReady.bind(this.gATrackingHandler),this.onGaTracking=this.gATrackingHandler.onGaTracking.bind(this.gATrackingHandler),this.onDataLayer=function(e){return r.dataLayerHandler.onDataLayer(e)},this.onDataLayerReady=function(e){return r.dataLayerHandler.onDataLayerReady(e)},this.onDfDataReady=j,this.onVisibilityHidden=M,this.onLeavePage=this.leavePageHandler.onLeavePage.bind(this.leavePageHandler),this.onClick=z,this.onNextTick=Y,this.getSelector=Z,this.onSoftNavigation=this.historyHandler.onSoftNavigation.bind(this.historyHandler),this.onBFCacheNavigation=_,this.pluginHandler=new q(this)}return e.prototype.initializePlugins=function(){var e=this.getPlugins();this.initCustomTimerData(e),this.initCustomDimensionData(e),this.initEnforcedTopLevelAttributes(e),e.forEach(this.pluginHandler.initPlugin,this.pluginHandler),this.leavePageHandler.init()},e.prototype.reinitialize=function(e,t){this.init=this.getInit(e,t),this.sentTracking=Object.create(this.init),this.unsentTracking={},this.beaconIndex=0,this.shouldTrackPI=!N().pageDisabled&&"B"!==r.group},e.prototype.reportEvent=function(e,t,n,r){if(!(void 0===t||t<0)&&(this.reportTracking(e,t),void 0!==r&&n)){var i=r-t;if(i<0)return;this.reportTracking(n,i)}},e.prototype.sendCurrentTracking=function(e){if((e||!(this.beaconIndex>=90))&&!N().noTracking){var t=this.getUnsentTracking();if(t){e&&(t.unloadType=e,this.sentTracking.unloadType=e);var n="";0===t.beaconIndex&&(n="?pi=1"+(this.shouldTrackPI?"&bqpi=1":"")),this.shouldTrackPI=!1,y(r.appURL+"/rum/pi"+n,t)}}},e.prototype.updateBaseDimension=function(e,t){this.init[e]=t},e.prototype.trackCustomEvent=function(e,t,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!0);var o={action:""+e,label:""+t,value:isNaN(Number(n))?0:Number(n)};i&&(o.ts=performance.now()),this.reportTracking("events",o,X.Append),r&&this.sendCollapsed()},e.prototype.trackCustomTimer=function(e,t,n){void 0===n&&(n=!0),this.reportCustomTimer(e,t),n&&this.sendCollapsed()},e.prototype.set=function(e,t,n,r){var i;void 0===n&&(n=!0),void 0===r&&(r=!1),i="boolean"==typeof r?r?X.Force:X.Override:r;var o=this.reportTracking(e,t,i);return n&&this.sendCollapsed(),o},e.prototype.setTiming=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!1),"number"==typeof t?this.set(e,t-this.init.navigationStart,n,r):this.set(e,t,n,r)},e.prototype.append=function(e,t,n){void 0===n&&(n=!0),this.reportTracking(e,t,X.Append),n&&this.sendCollapsed()},e.prototype.getBeaconIndex=function(){return this.beaconIndex},e.prototype.calculateRelative=function(e){if(void 0!==e)return e-this.init.navigationStart},e.prototype.reportTracking=function(e,t,n){if(void 0===n&&(n=X.Override),null==t||""===t)return!1;var r=this.customDimensions.filter((function(t){return t.dimensionData.hasOwnProperty(e)}))[0];if(r)return this.reportCustomDimension(e,t,r.type);if(this.customTimers.hasOwnProperty(e))return this.reportCustomTimer(e,t);if(n===X.Append)return this.unsentTracking[e]=this.getConcatenatedUnsent(e,t),!0;if(!Array.isArray(t)&&S(t,this.sentTracking[e])&&n!==X.Force)return!1;var i=this.unsentTracking&&this.unsentTracking.hasOwnProperty&&this.unsentTracking.hasOwnProperty(e);return(!this.sentTracking.hasOwnProperty(e)&&!i||n!==X.Once&&!this.isTopLevelDimension(e))&&(this.unsentTracking[e]=t,!0)},e.prototype.reportCustomDimension=function(e,t,n){var r="string"==typeof t?t:JSON.stringify(t),i=this.customDimensions.filter((function(e){return e.type===n}))[0];if(!i)return!1;if(i.dimensionData[e]&&"null"!==i.dimensionData[e])return!1;i.dimensionData[e]=r;var o=this.unsentTracking[i.name]||{};return o[e]=r,this.unsentTracking[i.name]=o,!0},e.prototype.reportCustomTimer=function(e,t){if("number"!=typeof t)return!1;if(this.customTimers[e]&&-1!==this.customTimers[e])return!1;this.customTimers[e]=t;var n=this.unsentTracking.customTimers||{};return n[e]=t,this.unsentTracking.customTimers=n,!0},e.prototype.getPlugins=function(){return window.SpeedKit&&window.SpeedKit.rumPlugins?window.SpeedKit.rumPlugins:[]},e.prototype.initEnforcedTopLevelAttributes=function(e){var t=this;this.enforcedTopLevelAttributes.forEach((function(n){!!e.filter((function(e){return e.key===n.key})).length||t.reportTracking(n.key,n.defaultValue)}))},e.prototype.initCustomDimensionData=function(e){var t=this;e.forEach((function(e){e.key&&(t.customDimensions.every((function(t){return t.type!==e.type}))||t.isTopLevelDimension(e.key)||t.reportCustomDimension(e.key,"null",e.type))}))},e.prototype.initCustomTimerData=function(e){var t=this;e.forEach((function(e){e.key&&"CustomTimer"===e.type&&(t.customTimers[e.key]=-1)}))},e.prototype.getUnsentTracking=function(){if(0===Object.keys(this.unsentTracking).length)return null;var e=Object.create(null);for(var t in this.init)Object.prototype.hasOwnProperty.call(this.init,t)&&(e[t]=this.init[t]);for(var t in e.beaconIndex=this.beaconIndex,this.unsentTracking)Object.prototype.hasOwnProperty.call(this.unsentTracking,t)&&(this.sentTracking[t]=Array.isArray(this.unsentTracking[t])&&Array.isArray(this.sentTracking[t])?this.sentTracking[t].concat(this.unsentTracking[t]):this.unsentTracking[t],e[t]=this.unsentTracking[t]);return this.unsentTracking=Object.create(null),this.beaconIndex+=1,e},e.prototype.sendCollapsed=function(){var e=this;this.leavePageHandler.isUnloaded()?this.sendCurrentTracking():this.sendingScheduled||(this.sendingScheduled=!0,setTimeout((function(){e.sendingScheduled=!1,e.sendCurrentTracking()}),100))},e.prototype.getInit=function(e,t){return N().performanceOnly?e:T(e,t)},e.prototype.getTrackedData=function(){var e=Object.create(null);for(var t in this.init)Object.prototype.hasOwnProperty.call(this.init,t)&&(e[t]=this.init[t]);for(var t in this.sentTracking)Object.prototype.hasOwnProperty.call(this.sentTracking,t)&&(e[t]=this.sentTracking[t]);return e},e.prototype.isTopLevelDimension=function(e){return!!this.enforcedTopLevelAttributes.filter((function(t){return t.key===e})).length},e.prototype.getConcatenatedUnsent=function(e,t){var n=Array.isArray(t)?t:[t],r=void 0!==this.unsentTracking[e]?this.unsentTracking[e]:[];return(Array.isArray(r)?r:[r]).concat(n)},e}();function ue(e){return parseFloat((1-e).toFixed(2))}function de(){var e=t.userAgent;return e.indexOf("Safari")>-1&&-1===e.indexOf("Edge")&&-1===e.indexOf("Chrome")}function le(){return!de()&&"undefined"!=typeof PerformanceNavigationTiming&&!!performance.getEntriesByType}function pe(){var e=performance.navigation;if(!le())return fe(e.type);var t=performance.getEntriesByType("navigation");return t[0]&&"toJSON"in t[0]?re[t[0].type]:fe(e.type)}function fe(e){return"number"!=typeof e?re[e]:e}function ge(){return window.performance?performance.timing.navigationStart||Math.trunc(performance.timeOrigin):0}function ve(e){var t=function(){var e=window.performance.timing;if(!le())return e;var t=performance.getEntriesByType("navigation");if(t[0]&&"toJSON"in t[0])return t[0].toJSON();return e}(),n=window.performance.timing,r="entryType"in t,i={};for(var o in t)if("number"==typeof t[o]){var a=0!==t[o],s=n&&("number"!=typeof n[o]||0!==n[o]);a||s?r?i[o]=Math.trunc(t[o]):t[o]>=e&&(i[o]=t[o]-e):i[o]=-1}else i[o]=t[o];return i.navigationStart=e,i.domLoading=n.domLoading-e,i.ttfb=r?i.responseStart:n.domLoading-e,i}function he(){return"undefined"!=typeof PerformanceNavigationTiming&&performance.getEntriesByType&&"document"!==performance.getEntriesByType("navigation")[0].name?performance.getEntriesByType("navigation")[0].name:location.href}function me(e,t){e.lastNavigate.cdnBackendTime&&t.set("cdnBackendTime",e.lastNavigate.cdnBackendTime,!1),e.lastNavigate.cdnPoP&&t.set("cdnPop",""+e.lastNavigate.cdnPoP,!1);var n=function(){var e=null;try{e=new URL(r.sw||"",window.location.origin).searchParams.get("r")}catch(t){}return e}();n&&t.set("configVersion",""+n,!1)}function ye(e,t){var n,i,o;e.controllingServiceWorker&&t.set("controllingSw",e.controllingServiceWorker,!1),e.lastNavigate.applicationState&&t.set("applicationState",e.lastNavigate.applicationState,!1),e.lastNavigate.responseCause!==Q.Unknown&&t.set("responseCause",e.lastNavigate.responseCause,!1)&&t.set("responseSource",e.lastNavigate.responseSource,!1,!0),e.lastNavigate.disconnectCause!==ne.None&&e.lastNavigate.disconnectCause!==ne.DashboardDisabled&&t.set("disconnectCause",e.lastNavigate.disconnectCause,!1),"number"==typeof e.split&&t.set("split",(n=e.group,i=e.split,o="A"===n&&"number"==typeof r.secondarySplit?"B"===r.secondaryGroup?ue(r.secondarySplit):r.secondarySplit:1,i*o),!1),e.actualSplitTestId&&e.actualSplitTestId!==e.splitTestId&&t.set("actualTestId",""+e.actualSplitTestId,!1),e.actualGroup&&e.actualGroup!==e.group&&t.set("actualTestGroup",""+e.actualGroup,!1)}function Se(n,i){var o,a=n.rumController,s=!!r.secondaryGroup,c=window.devicePixelRatio,u=n.lastNavigate.responseCause===Q.BfCache,d=s?n.splitTestId+"-"+r.secondaryTestId:n.splitTestId,l=function(){var e=he();if(N().stripAllParameter)return e.replace(/\?.*/,"?redacted");if(N().stripParameters){var t=new URL(e);return N().stripParameters.forEach((function(e,n){var r=t.searchParams.get(e)||"",i=r.length?e+"="+r:e;t.search=t.search.replace(new RegExp("(\\?|&)"+i),"$1redacted-"+n)})),t.href}return e}();s&&a.updateBaseDimension("testGroup",r.group+"-"+r.secondaryGroup);var p=N().performanceOnly?0:n.sessionIndex;a.set("sessionIndex",p,!1);var f=ge();a.reportEvent("snippetExecution",n.executionTime-f),a.set("url",l,!1,X.Once),a.set("userAgent",t.userAgent,!1,X.Once),a.set("referrer",e.referrer,!1),a.set("testId",d||"None",!1),a.set("responseSource",n.lastNavigate.responseSource,!1),a.set("assetSource",n.lastNavigate.assetSource,!1),a.set("assetCause",n.lastNavigate.assetCause,!1),a.set("firstLoad",n.lastNavigate.firstLoad,!1),a.set("disabled",n.disabled,!1),a.set("swSupported",n.swSupported,!1),a.set("skSupported",n.skSupported,!1),a.set("screenResolution",n.screenResolution,!1,X.Once),a.set("documentVisible","visible"===e.visibilityState,!1,X.Once),a.set("variation",n.lastNavigate.variation,!1),a.set("pageTypeEnabled",n.pageTypeEnabled,!1,X.Once),a.set("devicePixelRatio",c,!1),a.set("inControlGroup",r.isControlGroup,!1),a.set("inIFrame",window.top!==window,!1),a.set("supportsTouch","ontouchend"in e,!1),ye(n,a),void 0===typeof window.performance||u||(function(e){var t=ge(),n=ve(t);e.set("navigationStart",t,!1),e.set("secureConnectDuration",n.secureConnectionStart>=0&&n.connectEnd>=0?n.connectEnd-n.secureConnectionStart:-1,!1),e.reportEvent("unload",n.unloadEventStart,"unloadDuration",n.unloadEventEnd),e.reportEvent("domainLookup",n.domainLookupStart,"domainLookupDuration",n.domainLookupEnd),e.reportEvent("connect",n.connectStart,"connectDuration",n.connectEnd),e.reportEvent("redirect",n.redirectStart,"redirectDuration",n.redirectEnd),e.reportEvent("response",n.responseStart,"responseDuration",n.responseEnd),e.reportEvent("load",n.loadEventStart,"loadDuration",n.loadEventEnd),e.reportEvent("domContentLoaded",n.domContentLoadedEventStart,"domContentLoadedDuration",n.domContentLoadedEventEnd),e.reportEvent("request",n.requestStart),e.reportEvent("fetch",n.fetchStart),e.reportEvent("ttfb",n.ttfb),e.reportEvent("domComplete",n.domComplete),e.reportEvent("domInteractive",n.domInteractive),e.reportEvent("workerStart",n.workerStart)}(a),function(e){var t=pe();void 0!==t&&e.set("navigationType",t,!1)}(a),function(e){if("undefined"!=typeof PerformancePaintTiming&&window.performance.getEntriesByType){var t=performance.getEntriesByType("paint");if(t&&t.length){var n=t.find((function(e){return"first-paint"===e.name})),r=t.find((function(e){return"first-contentful-paint"===e.name}));e.set("firstPaint",n?Math.round(n.startTime):-1,!1),e.set("firstContentfulPaint",r?Math.round(r.startTime):-1,!1)}}else if(void 0!==window.performance){var i=performance.timing.msFirstPaint;i&&(e.setTiming("firstPaint",i,!1),e.setTiming("firstContentfulPaint",i,!1))}}(a)),u||(me(n,a),function(e,t){var n=e.lastNavigate?e.lastNavigate.timings:null;n&&(t.setTiming("speedKitFetchEvent",n.eventStart,!1),t.setTiming("speedKitHandle",n.handleStart,!1),t.setTiming("speedKitBlacklistHandler",n.blacklistHandler,!1),t.setTiming("speedKitDisabledPageHandler",n.disabledPageHandler,!1),void 0!==n.handleStart&&void 0!==n.handleEnd&&t.set("speedKitHandleDuration",n.handleEnd-n.handleStart,!1),void 0!==n.cacheStart&&void 0!==n.cacheEnd&&t.reportEvent("speedKitCacheLookup",n.cacheStart-n.handleStart,"speedKitCacheLookupDuration",n.cacheEnd-n.handleStart),void 0!==n.fetchStart&&void 0!==n.fetchEnd&&t.reportEvent("speedKitFetchCall",n.fetchStart-n.handleStart,"speedKitFetchCallDuration",n.fetchEnd-n.handleStart))}(n,a),a.set("originTTFB",n.lastNavigate.originTTFB,!1),a.set("assetTTFB",n.lastNavigate.assetTTFB,!1),a.set("redirectList",null===(o=n.lastNavigate.redirectList)||void 0===o?void 0:o.map((function(e){return e.url})),!1,X.Once)),i?a.sendCurrentTracking(i):a.sendCollapsed()}function we(){return!!e.querySelector(".speed-kit-dynamic-loading,.speed-kit-dynamic-loaded")}function be(e,t,n){var r=N();return!r.noTracking&&!r.performanceOnly&&(R(c,e),R(u,t),R(d,""+n),R(l,Date.now().toString()),!0)}function ke(e){var t,n=function(){Se(e)};h((function(){setTimeout((function(){n()}))})),function(e,t){"complete"!==e.readyState?window.addEventListener("speed-kit-completed",t,{once:!0}):t()}(e,(function(){n()})),t=function(){n()},"undefined"!=typeof PerformancePaintTiming&&window.performance.getEntriesByType&&performance.getEntriesByType("paint").length>0||"undefined"==typeof PerformanceObserver||"undefined"==typeof PerformancePaintTiming?t():new PerformanceObserver(t).observe({entryTypes:["paint"]}),window.addEventListener("pageshow",(function(e){if(e.persisted){var t=E(),n=t[0],r=t[1];SpeedKit.navigateId=""+k(32),SpeedKit.lastNavigate.responseCause=Q.BfCache,SpeedKit.lastNavigate.responseSource=we()?ie.AssetAPI:ie.Origin,SpeedKit.sessionIndex=r,SpeedKit.executionTime=Date.now();var i=performance.timing.navigationStart||performance.timeOrigin,o={sessionId:n,userId:SpeedKit.userId},a={navigationStart:i,testGroup:SpeedKit.group,piId:SpeedKit.navigateId};SpeedKit.lastNavigate.firstLoad=!1,SpeedKit.rumController.reinitialize(a,o),be(SpeedKit.userId,n,r),Se(SpeedKit)}}))}function Te(t,n,r){var i;void 0===r&&(r={}),"function"==typeof CustomEvent?i=new CustomEvent(t,{detail:r}):(i=e.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,r),n.dispatchEvent(i)}function Ie(e){e.readyState!==oe.Complete&&(e.readyState===oe.Loading&&(e.readyState=oe.Prepared,Te("speed-kit-prepared",window)),setTimeout((function(){e.readyState=oe.Complete,Te("speed-kit-completed",window)})))}function Ne(e,t,n,r){void 0===r&&(r=1e3);var i=!1;return n&&setTimeout((function(){return i?null:n()}),r),new Promise((function(n,r){var o=new MessageChannel,a=o.port1,s=o.port2;a.onmessage=function(e){i=!0,n(e.data)},a.onmessageerror=function(e){return r(e.data)},e.postMessage(t,[s])}))}function Ce(e,t){Ne(e,{type:"get-navigate-info",clientURL:he()},(function(){t.lastNavigate.responseSource=we()?ie.AssetAPI:ie.Origin,t.lastNavigate.responseCause=Q.NoSwResponse,Ie(t)})).catch((function(e){return B(e,L.SNIPPET),null})).then((function(e){!function(e,t){if(!t||"wasCacheHit"in t)return;if("reason"in t)return e.lastNavigate.applicationState=t.applicationState,e.lastNavigate.errorMessage=t.reason,void(t.applicationState===ae.FAILED&&(e.lastNavigate.responseCause=Q.SwFailed));t.firstLoad=e.lastNavigate.firstLoad;var n=t.responseSource===ie.Origin,r=[Q.NoMatchingNavigate,Q.SwBooting,Q.NoNavigate,Q.Unknown].includes(t.responseCause);e.lastNavigate=Object.assign(e.lastNavigate,t),n&&we()&&(e.lastNavigate.responseSource=r?ie.AssetAPI:ie.SDN)}(t,e),Ie(t)}))}function Ee(e){return fetch(r.appURL+"/config/VAPIDPublicKey").then((function(e){return e.arrayBuffer()})).then((function(e){return{applicationServerKey:e,userVisibleOnly:!0}})).then((function(t){return e.subscribe(t)})).then((function(e){var t={subscription:e,devicetype:"WebPush"};return fetch(r.appURL+"/db/Device/register",{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})})).then((function(e){return 200===e.status}),(function(){return!1}))}function Pe(){return"Notification"in window?Notification.requestPermission().then((function(e){return"denied"===e?"denied":"granted"!==e?"undecided":t[n].ready.then((function(e){var t=e.pushManager;return function(e){return e.getSubscription().then((function(e){return!!e}))}(t).then((function(e){return!!e||Ee(t)}))})).then((function(e){return e?"registered":"unregistered"}))})):Promise.resolve("unsupported")}function Le(e){var r=t[n];if(r&&r.ready&&"function"==typeof r.ready.then)return r.ready.then((function(t){var n;if(t.active&&"activated"===t.active.state)return t.active.postMessage(e);null===(n=t.active)||void 0===n||n.addEventListener("statechange",(function(){var n;"activated"===(null===(n=t.active)||void 0===n?void 0:n.state)&&t.active.postMessage(e)}))}))}function Oe(e){return e?new URL(e,location.origin).pathname:e}function De(e){var n;null===(n=Le({type:"update-device",data:e}))||void 0===n||n.catch((function(e){return B(e,L.SNIPPET)}));try{!function(e){if("B"===r.group)return;var n=Oe(r.scope),i=t.userAgent,o=new v(n);o.set("/com.baqend.speedkit.device",{device:e,userAgent:i}).catch((function(e){return B(e,L.SNIPPET)})).then((function(){return o.disconnect().catch((function(e){return B(e,L.SNIPPET)}))}))}(e)}catch(i){B(i,L.SNIPPET)}}function Re(e){var r=t[n].controller;r&&r.postMessage({type:"bypass-deactivation",data:e})}function Ae(){var e=t[n];e&&e.controller&&e.controller.postMessage({type:"connect"})}function xe(){var e=t[n];e&&e.controller&&e.controller.postMessage({type:"disconnect"})}function Ue(){var e=C("baqend-speedkit-hashing-salt");if(e)return e;var t=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<32;n+=1)t+=e.charAt(Math.floor(Math.random()*e.length));return t}();return P("baqend-speedkit-hashing-salt",t),t}function Be(e){return function(e,t){for(var n="",r=0;r<e.length;r+=1){var i=r%t.length;n+=(e.charCodeAt(r)^t.charCodeAt(i)).toString(32)}return n}(e,Ue())}function Ke(e){var r=t[n].controller;r&&r.postMessage({type:"offline",data:e})}function Fe(){var e=t[n].controller;e&&e.postMessage({type:"fetch-bloom-filter",data:!0})}function Ge(){return r.disabled||!1===r.enabled}function qe(e){return e===Q.SkUnsupported}function Me(t){var n;null===(n=Le({event:t,type:"send-cookies",data:e.cookie}))||void 0===n||n.catch((function(e){return B(e,L.SNIPPET)}))}function je(e,r,i){return!!t[n]&&!!t[n].getRegistrations&&function(e,n,r){return"Safari"===e?15!==n||r>=2||t.userAgent.includes("SpeedCurve"):"Chrome"===e?n>=61:"Firefox"!==e||59!==n}(e,r,i)}function He(){return t.userAgent.indexOf("Edge")>=0}function We(e){var n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)\.?(\d+)?/i)||[],r=null;if(/trident/i.test(n[1]))return r=/\brv[ :]+(\d+)\.?(\d+)?/g.exec(e)||[],["IE",parseInt(r[1],10)||0,parseInt(r[2],10)||0];var i=function(e){if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*?Version)/.test(e)){var t=e.match(/(OS |os |OS)(\d+)_?(\d+)?/i)||[];return[/\b(crios)\/(\d+)/i.test(e)?"Safari":"SafariWebView",parseInt(t[2],10)||0,parseInt(t[3],10)||0]}return null}(e)||function(e,t){if("Chrome"===t[1]){var n=null;if(null!=(n=e.match(/\bEdg\/(\d+)\.?(\d+)?/)||e.match(/\bEdge\/(\d+)\.?(\d+)?/)))return["Edge",parseInt(n[1],10),parseInt(n[2],10)||0];if(null!=(n=e.match(/\bOPR\/(\d+)\.?(\d+)?/)))return["Opera",parseInt(n[1],10),parseInt(n[2],10)||0]}return null}(e,n);if(null!==i)return i;var o=n[2]?[n[1],parseInt(n[2],10),parseInt(n[3],10)||0]:[t.appName,parseInt(t.appVersion,10),0];return-1===e.indexOf("Android")&&null!=(r=e.match(/version\/(\d+)\.?(\d+)?/i))&&(o.splice(1,1,parseInt(r[1],10)),o.splice(2,1,parseInt(r[2],10)||0)),o}function Ve(e){var t=We(e);if(!t[0]||isNaN(t[1])||isNaN(t[2]))return!0;return!!e.match(/app(?!le)/gi)||["sdk","-ios","webview","wv","overlay"].some((function(t){return e.toLowerCase().indexOf(t)>-1}))}function Je(e,n,i,o){void 0===o&&(o=!1);var a=!r.enableForWebViews&&Ve(t.userAgent);return je(e,n,i)&&!o&&!a&&!He()}function ze(e){return"regexp:/"+e.source+"/"+(e.flags||"")}function Ye(e,t,n){return void 0===n&&(n=1),t instanceof Array?t.some((function(t){return Ye(e,t,n)})):t instanceof RegExp?t.test(e):2===n?e.toLowerCase()===t.toLowerCase():String.prototype.startsWith?e.toLowerCase().startsWith(t.toLowerCase()):e.toLowerCase().substring(0,t.length)===t.toLowerCase()}function Xe(e){return function(e){return/^(?:(?:\w+?:)?\/\/)?(.*)$/.exec(e)[1]}(function(e){try{var t=new URL(e);return t.hash&&(t.hash=""),t.toString()}catch(r){var n=e.match(/([^#]+)#/);return n&&n[1]?n[1]:e}}(e))}function $e(e,t,n){var r,i;if(e.contentType&&!(e.contentType.indexOf(se.Document)>=0||e.contentType.indexOf(se.Navigate)>=0))return!1;var o=[];if(e.pathname){var a=(null===(r=n.ruleSetConfig)||void 0===r?void 0:r.version)&&(null===(i=n.ruleSetConfig)||void 0===i?void 0:i.version)>=2?t.pathname:""+t.pathname+t.search;o.push(Ye(a,e.pathname))}return e.host&&o.push(Ye(t.host,e.host)),e.url&&o.push(Ye(Xe(t.href),e.url)),!!o.length&&o.every((function(e){return e}))}function _e(e,t){var n=t?new URL(t):location,r=!e.enabledSites||e.enabledSites.some((function(t){return $e(t,n,e)})),i=!!e.disabledSites&&e.disabledSites.some((function(t){return $e(t,n,e)})),o=r&&!i,a=!e.whitelist||e.whitelist.some((function(t){return $e(t,n,e)})),s=!!e.blacklist&&e.blacklist.some((function(t){return $e(t,n,e)}));return o&&(a&&!s)}function Ze(e){var t;null===(t=Le({type:"prewarm-fetch",data:e.filter((function(e){return function(e){try{return new URL(e,window.location.origin),!0}catch(t){return!1}}("string"==typeof e?e:e.url)})).map((function(e){var t="string"!=typeof e;return{url:t?e.url:e,contentType:t&&e.as||se.Navigate}}))}))||void 0===t||t.catch((function(e){B(e,L.SNIPPET)}))}function Qe(e,t,n,i){var o,a,s=r.group,c=window.SpeedKit||{},u=c.navigateId||""+k(32),d=ge(),l=t.userId,p=t.sessionId,f=t.sessionIndex,g=e.browser,v=e.browserVersion,h=e.minorVersion,m="undefined"!==n.testId||i?n.testId:void 0,y="undefined"!==n.group||i?n.group:void 0,S={navigationStart:d,testGroup:s,piId:u},w={userId:l,sessionId:p},b=(o=e.responseCause,a=!N().pageDisabled,(Ge()||qe(o))&&a&&"B"!==r.group),T=new ce(S,w,b),I=T.trackCustomEvent.bind(T),C=T.getTrackedData.bind(T),E={navigateId:u,userId:l,sessionId:p,sessionIndex:f,group:s,actualGroup:y,rumController:T,getTrackedData:C,track:I,subscribe:Pe,bypassDeactivation:Re,activate:Ae,deactivate:xe,split:"number"==typeof r.split?"B"===r.group?ue(r.split):r.split:1,updateDevice:De,getHash:Be,simulateOfflineMode:Ke,fetchBloomFilter:Fe,updateCookies:Me,preload:Ze,actualSplitTestId:m,disabled:!1,lastNavigate:e,readyState:oe.Loading,splitTestId:r.splitTestId,controllingServiceWorker:et(),executionTime:Date.now(),swSupported:je(g,v,h),skSupported:Je(g,v,h),screenResolution:{width:window.screen.width*window.devicePixelRatio,height:window.screen.height*window.devicePixelRatio},pageTypeEnabled:_e(r)};return Object.keys(c).forEach((function(e){E[e]=c[e]})),window.SpeedKit=E,T.initializePlugins(),window.SpeedKit}function et(){return t.serviceWorker&&t.serviceWorker.controller?t.serviceWorker.controller.scriptURL:null}function tt(t){if("undefined"!=typeof Storage)try{localStorage.removeItem(t)}catch(n){}try{e.cookie=t+"=; expires="+(new Date).toUTCString()+"; path=/; SameSite=lax; Secure"}catch(n){}}function nt(e,t){if(t)return!0;var n=e.group,r=e.testId;return!(!r||-1===r.indexOf("-debug"))||"A"!==n}function rt(){return"true"===C("baqend-speedkit-debug")}function it(e,t){var n=function(e,t){var n="baqend-speedkit-secondary-config"===t,i=function(e,t){var n="undefined"!==e.testId,i="undefined"!==e.group,o=t?r.secondaryTestId:r.splitTestId,a=n&&(s=e.testId,c=o,(null==s?void 0:s.replace("-debug",""))!==(null==c?void 0:c.replace("-debug","")));var s,c;if(i&&!a)return e.group;var u=t?r.secondaryGroup:r.group,d=t?r.secondarySplit:r.split;return function(e,t){if(void 0===e)return Math.random()<t?"A":"B";return e}(u,d)}(e,n),o=n?r.secondaryTestId:r.splitTestId;o&&(o=function(e){if(!rt())return e.replace("-debug","");if(e.indexOf("-debug")>-1)return e;return e+"-debug"}(o));return{group:i,testId:o}}(e,t),i="baqend-speedkit-secondary-config"===t;return i?(r.secondaryGroup=n.group,r.secondaryTestId=n.testId):(r.group=n.group,r.splitTestId=n.testId),nt(n,i?r.secondarySplit<1:r.split<1)?(function(e,t,n){r=n,i=encodeURIComponent(JSON.stringify(e)),o=encodeURIComponent(JSON.stringify(t)),o!==i&&o&&R(r,o);var r,i,o}(e,n,t),!0):(tt(t),!1)}function ot(e,i,o,a){var s=window.location.href,c=We(t.userAgent),u=c[0],d=c[1],l=c[2],p=function(e,i,o,a,s,c){var u=Je(e,i,o,a),d="B"===r.group||"B"===r.secondaryGroup;return u?!d&&Ge()?[ie.Origin,Q.Disabled]:!s||!r.sdnSetup&&we()?!d&&c?[ie.Origin,Q.GroupChange]:d?[ie.Origin,Q.NonSKGroup]:t[n].controller?[we()?ie.AssetAPI:ie.Origin,Q.Unknown]:[ie.Origin,Q.NoSwInstalled]:[ie.Origin,Q.FirstLoad]:[ie.Origin,Q.SkUnsupported]}(u,d,l,e,i,"B"===o.group||"B"===a.group),f=p[0];return{url:s,browser:u,firstLoad:i,browserVersion:d,minorVersion:l,responseCause:p[1],responseSource:f,cdnBackendTime:null,cdnPoP:null,splitTestId:o.testId,group:void 0!==r.split?o.group:r.group,disconnectCause:ne.None}}function at(e,t,n){return e.put(""+t,new Response(null,{status:200,statusText:(r=n,JSON.stringify(r,(function(e,t){return t instanceof RegExp?ze(t):t})))}));var r}function st(e){var t=new URL(e.sw||"/sw.js",location.origin);return t.origin+t.pathname}function ct(i){var o=function(e){var t=e;if(r.includeServiceWorker){var n=e.indexOf("?")>=0?"&":"?";t+=n+"othersw="+r.includeServiceWorker}return t}(r.sw);return t[n].register(o,{scope:r.scope||"/"}).then((function(t){var n;n=!1,e.addEventListener("visibilitychange",(function(){"hidden"===e.visibilityState?n||(n=!0,Me("visibilitychange")):n=!1})),window.addEventListener("pagehide",(function(){n||(n=!0,Me("pagehide"))}));var o=st(r),a=i.controllingServiceWorker;(!a||(null==o?void 0:o.split("?")[0])!==a.split("?")[0])&&function(t){h((function(){window.setTimeout((function(){if(t.active&&"undefined"!=typeof PerformanceResourceTiming){var n,i=(n=ve(ge()).domContentLoadedEventEnd,window.performance.getEntriesByType?performance.getEntriesByType("resource").filter((function(e){if(n>0&&e.startTime+e.duration>n)return!1;var t;try{t=new URL(e.name)}catch(r){return!1}return(null==t?void 0:t.origin)!==window.location.origin})):[]).map((function(t){var n,r=t.name,i=t.initiatorType;return"link"===i&&(n=function(t){var n=e.querySelector('link[href="'+t+'"]');switch((null==n?void 0:n.getAttribute("rel"))||(null==n?void 0:n.getAttribute("as"))){case"audio":return se.Audio;case"document":return se.Document;case"fetch":return se.Fetch;case"image":return se.Image;case"script":return se.Script;case"stylesheet":case"style":return se.Style;case"track":return se.Track;case"video":return se.Video;default:return}}(r)),{initiatorType:i,contentType:n,url:r}}));Ne(t.active,{type:"prewarm-fetch",data:i}).then((function(n){if(n.applicationState===ae.FAILED)return function(t){return window.caches?caches.open(g(s,r.scope)).then((function(t){var n=window.devicePixelRatio,i=window.screen.width,o=[[location.origin,e.cookie]];return Promise.all([at(t,"/com.baqend.speedkit.screen",{dpr:n,width:i}),at(t,"/com.baqend.speedkit.config",r),at(t,"/com.baqend.speedkit.cookie",{origins:o})])})).then((function(){return t.postMessage({type:"init-cache"})})):Promise.resolve()}(t.active)}))}}),1e3)}))}(t),function(e){e.navigationPreload&&ut(e).then((function(){r.navigationPreload?e.navigationPreload.enable():e.navigationPreload.disable()})).catch((function(e){return B(e,L.SNIPPET)}))}(t),ut(t).then((function(){!function(e){var t=new URLSearchParams(location.search).get("debugSpeedKit"),n=sessionStorage.getItem("baqend-speedkit-debug-config-hash"),r=t||n;"reset"===t||!r?sessionStorage.removeItem("baqend-speedkit-debug-config-hash"):sessionStorage.setItem("baqend-speedkit-debug-config-hash",r),Ne(e,{type:"config-debug",data:r})}(t.active)}))}))}function ut(e){var t=e.waiting||e.installing;return t?new Promise((function(e){return t.addEventListener("statechange",(function(){"activated"===t.state&&e(t)}))})):Promise.resolve(e.active)}function dt(t){"loading"===e.readyState?e.addEventListener("DOMContentLoaded",t):setTimeout(t,0)}function lt(e){var t=A(e),n="baqend-speedkit-secondary-config"===e,i=n?r.secondarySplit:r.split,o=n?s+"-secondary-ab-test-info":s+"-ab-test-info";if(t)return pt(t);var a={group:"undefined",testId:"undefined"},c=A(o);c&&(a=pt(c),tt(o),nt(a,null!=i&&i<1)&&R(e,encodeURIComponent(JSON.stringify(a))));return a}function pt(e){try{return JSON.parse(decodeURIComponent(e))}catch(t){return{group:"undefined",testId:"undefined"}}}function ft(){var e,t,n=JSON.parse(C("baqend-speedkit-rum-split-enabled")||"{}"),i=!n.sessionId,o=n.sessionId===A(u);return{rumSplitEnabled:n&&n.sessionId?!1!==n.split:(t=Math.random()<(null!==(e=r.sampleRate)&&void 0!==e?e:1),r.sampleRate&&P("baqend-speedkit-rum-split-enabled",JSON.stringify({split:t,sessionId:A("baqend-speedkit-session-id")})),t),isActiveSession:i||o}}function gt(){if(!(!D()&&"1"!==C("baqend-speedkit-rum-opt-out")&&!window.deactivateSpeedKitRUM))return!1;var t=r.rumTracking;if(!t)return!1;if(void 0===r.sampleRate)return function(t){if(e.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax; Secure","undefined"!=typeof Storage)try{localStorage.removeItem(t)}catch(n){}}("baqend-speedkit-rum-split-enabled"),t;var n=ft(),i=n.rumSplitEnabled,o=n.isActiveSession;return!(!i||!o)&&t}function vt(t){for(var n=0,r=e.cookie.replace(/\s/g,"").split(";").filter((function(e){return 0===e.lastIndexOf(t,0)}));n<r.length;n++){var i=r[n],o=i.indexOf("="),a=o>-1?i.substr(0,o):i;e.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax; Secure"}}function ht(e,t){if(e)return function(e,t){if("undefined"!=typeof Storage)try{for(var n in localStorage)n.includes(e)&&!(null==t?void 0:t.includes(n))&&localStorage.removeItem(n)}catch(r){}}(s,["baqend-speedkit-sk-opt-out"]),void vt(s);t.noCookies&&vt(s),!t.noTracking&&!t.performanceOnly||r.sampleRate||[c,u,d,l].forEach((function(e){return tt(e)}))}function mt(e){e.readyState!==oe.Prepared&&e.readyState!==oe.Complete&&(e.readyState=oe.Prepared,Te("speed-kit-prepared",window))}function yt(e){var t=e.active||e.installing||e.waiting;if(!t)return"";var n=new URL(t.scriptURL);return n.origin+n.pathname}function St(e,t){var n=t.scriptURL;if(!n)return!1;var r=st(e);if(r===n.split("?")[0])return!0;var i=new URL(n).searchParams.get("othersw");return!!i&&r===i.split("?")[0]}!function(e){e.Blacklist="Blacklist",e.Blocked="Blocked",e.ClientError="ClientError",e.Redirect="Redirect",e.CORSRedirect="CORSRedirect",e.CriticalResource="CriticalResource",e.Delayed="Delayed",e.Disabled="Disabled",e.Disconnected="Disconnected",e.DynamicBlock="DynamicBlock",e.DynamicBlockPreload="DynamicBlockPreload",e.DynamicBlockCached="DynamicBlockCached",e.Error="Error",e.Fallback="Fallback",e.Fetchlist="Fetchlist",e.FirstLoad="FirstLoad",e.GroupChange="GroupChange",e.HardReload="HardReload",e.IgnoredAfterPOSTNavigate="IgnoredAfterPOSTNavigate",e.InternalServerError="InternalServerError",e.LoopDetected="LoopDetected",e.NavigationPreload="NavigationPreload",e.NonSKGroup="NonSKGroup",e.SkUnsupported="SkUnsupported",e.NoSwInstalled="NoSwInstalled",e.NoSwResponse="NoSwResponse",e.Offline="Offline",e.Onboarding="Onboarding",e.SafeScript="SafeScript",e.SwFailed="SwFailed",e.TrackingRequest="TrackingRequest",e.Unknown="Unknown",e.Immutable="Immutable",e.BfCache="BfCache",e.NotEnabled="NotEnabled",e.NotWhitelisted="NotWhitelisted",e.UserAgentChanged="UserAgentChanged",e.TooLargeRequest="TooLargeRequest",e.FormatNotSupported="FormatNotSupported",e.OtherSwInstalled="OtherSwInstalled",e.SwBooting="SwBooting",e.NoNavigate="NoNavigate",e.NoMatchingNavigate="NoMatchingNavigate",e.Timeout="Timeout",e.DisabledSites="DisabledSites",e.PartialResponse="PartialResponse",e.PreloadBlacklist="PreloadBlacklist"}(Q||(Q={})),function(e){e.CacheMiss="CacheMiss",e.ExpiredResponse="ExpiredResponse",e.InstantRefresh="InstantRefresh",e.Deployment="Deployment",e.InvalidCacheSketch="InvalidCacheSketch",e.ReloadCacheMode="ReloadCacheMode",e.UrlInCacheSketch="UrlInCacheSketch"}(ee||(ee={})),function(e){e.CacheHit="CacheHit",e.RevalidationWhitelist="RevalidationWhitelist"}(te||(te={})),function(e){e.SWException="SWException",e.BloomfilterException="BloomfilterException",e.DashboardDisabled="DashboardDisabled",e.ServerError="ServerError",e.None="None",e.AssetTimeout="AssetTimeout"}(ne||(ne={})),function(e){e[e.navigate=0]="navigate",e[e.reload=1]="reload",e[e.back_forward=2]="back_forward",e[e.prerender=3]="prerender",e[e.reserved=255]="reserved"}(re||(re={})),function(e){e.AssetAPI="AssetAPI",e.Shield="Shield",e.Storage="Storage",e.Edge="Edge",e.Collapsed="Collapsed",e.PendingAsset="PendingAsset",e.Stream="Stream",e.MissingCachingHeader="MissingCachingHeader",e.Generated="Generated",e.Origin="Origin",e.SwCache="SwCache",e.SDN="SDN"}(ie||(ie={})),function(e){e.Loading="loading",e.Complete="complete",e.Prepared="prepared"}(oe||(oe={})),function(e){e.INSTALLING="installing",e.BOOTING="booting",e.RUNNING="running",e.FAILED="failed"}(ae||(ae={})),function(e){e.Document="document",e.Navigate="navigate",e.Fetch="fetch",e.Audio="audio",e.Video="video",e.Track="track",e.PDF="pdf",e.Image="image",e.Style="style",e.Script="script",e.Font="font",e.Undefined="undefined"}(se||(se={}));try{!function(){if(function(){var t;try{window.navigator.serviceWorker,e.cookie}catch(r){if("SecurityError"===String(r.message)||String(r).indexOf("sandboxed")>=0)return!0}var n=null===(t=window.frameElement)||void 0===t?void 0:t.getAttribute("sandbox");return!!n&&"false"!==n}())return;if(window[i])return;window[i]=!0,window.addEventListener("speed-kit-completed",(function(e){if(/speedKitStatus/.test(window.location.href)){var t=window.SpeedKit,n=t.group,r=t.lastNavigate,i=r.responseCause,o=r.responseSource;alert("\n     Group: "+n+"\n\n     Cause: "+i+"\n\n     Source: "+o)}}));var o=window.location.href.match(/speed-kit-rum-opt-out=([01])/);o&&P("baqend-speedkit-rum-opt-out",o[1]);var a=D();a&&(r.rumTracking=!1);var s=function(){if(null!==A("baqend-speedkit-config")||null!==A(c))return!1;if(t.serviceWorker&&(null==r.split||1===r.split)){var e=t.serviceWorker.controller;return!e||!St(r,e)}return!0}(),u=function(){var e={group:"",testId:r.splitTestId};if(window.location.href.indexOf("disableSpeedKit=1")>=0?e.group="B":window.location.href.indexOf("enableSpeedKit=1")>=0&&(e.group="A"),e.group)return R("baqend-speedkit-config",encodeURIComponent(JSON.stringify(e))),e}()||lt("baqend-speedkit-config"),d=lt("baqend-speedkit-secondary-config"),l=function(e,t,n){var i=!1;if(n)return r.group="optOut",i;if(null==r.split){var o="undefined"===e.testId&&"undefined"!==e.group;r.group=o?e.group:"A"}else i=it(e,"baqend-speedkit-config");rt()&&(r.secondarySplit=null);if(null!=r.secondarySplit&&"A"===r.group){var a=it(t,"baqend-speedkit-secondary-config");i=i||a}return i}(u,d,a),p=function(){var e,t=window.SpeedKit||{},n=t.userId,r=t.sessionId,i=t.sessionIndex,o=N(),a=!o.noTracking&&!o.performanceOnly;return t.sessionId||(r=(e=a?E():["",0])[0],i=e[1]),t.userId||(n=a?x():""),{userInfo:{userId:n,sessionId:r,sessionIndex:i},persisted:be(n,r,i)}}(),f=p.userInfo,g=p.persisted,v=function(e,t){var n=null===A(c)&&null===A("baqend-speedkit-config")&&null===A("baqend-speedkit-secondary-config");if(!n)return!1;if(n&&e)return!0;if(t)return!1;return R(c,"testDenied"),n=null===A(c),tt(c),n}(l&&g,a),m=t.userAgent.indexOf("Firefox/")>=0;!function(e,n){r.sw=r.sw||"/sw.js",null!=r.split&&r.group&&(r.sw=(i=r.sw,o="gr",a=r.group,s=i.indexOf("?")>-1?"&":"?",""+i+s+o+"="+a));var i,o,a,s;r.rumTracking=gt(),void 0===r.isControlGroup&&(r.isControlGroup=(c=r.group,u=r.secondaryGroup,"B"===c||"A"===c&&"B"===u));var c,u;var d=!r.enableForWebViews&&Ve(t.userAgent);r.disabled=!1===r.enabled||r.disabled||"B"===r.group||"B"===r.secondaryGroup||d||He()||e,r.appURL="https://"+(r.appDomain||"{}.app.baqend.com".replace("{}",r.appName))+"/v1",r.customVariation&&r.customVariation.forEach((function(e){var t;e.variationFunction="function"==typeof e.variationFunction?e.variationFunction.toString():e.variationFunction,e.rules=null===(t=e.rules)||void 0===t?void 0:t.map((function(e){return e.contentType?e:Object.assign(e,{contentType:[se.Document]})})),e.rules||(e.rules=[{contentType:[se.Document]}])}));r.urlTransform&&r.urlTransform.forEach((function(e){e.transformFunction="function"==typeof e.transformFunction?e.transformFunction.toString():e.transformFunction}));r.dynamicBlockUrlTransform&&(r.dynamicBlockUrlTransform="function"==typeof r.dynamicBlockUrlTransform?r.dynamicBlockUrlTransform.toString():r.dynamicBlockUrlTransform);r.image&&Array.isArray(r.image)&&r.image.forEach((function(e){var t;e.imageFunction="function"==typeof e.imageFunction?null===(t=e.imageFunction)||void 0===t?void 0:t.toString():e.imageFunction}));Nt("customDevice"),we()?r.detectDevice=null:Nt("detectDevice");Array.isArray(r.shouldDetectDevice)&&r.shouldDetectDevice.length>0?r.shouldDetectDevice=r.shouldDetectDevice.map((function(e){return e.contentType?e:Object.assign(e,{contentType:[se.Document]})})):r.shouldDetectDevice=[{contentType:[se.Document]}];(n||de())&&(r.navigationPreload=!1)}(a,m);var y=function(e,i,o,a){var s=Qe(e,i,o,a);s.disabled="B"!==r.group&&"B"!==r.secondaryGroup&&!!Ge(),t[n]&&t[n].controller||!we()||(s.lastNavigate.responseSource=ie.SDN);return s}(ot(v,s,u,d),f,u,s),S=N();ht(a,S),S.noTracking||v||function(e){Se(e),ke(e)}(y);qe(y.lastNavigate.responseCause)||Ge()||(w=t.serviceWorker.register,Object.defineProperty(t.serviceWorker,"register",{configurable:!0,get:function(){return function(e,n){var i=st(r).split("/").pop();return i&&!e.includes(i)?t.serviceWorker.getRegistration():w.call(t.serviceWorker,e,n)}}}));var w;if(qe(y.lastNavigate.responseCause)||(b=window.top!==window,"https:"!==location.protocol||!r.executeInIframe&&b))return mt(y),void Ie(y);var b;var k=t[n].controller,T=function(e,t,n){if(!n)return!1;if(n.scriptURL&&!St(r,n))return function(e,t){return"B"===r.group||"B"===r.secondaryGroup||("B"===e.lastNavigate.group||(!!Ge()||t))}(e,t)||(e.lastNavigate.responseCause=Q.OtherSwInstalled),!1;return!0}(y,s,k);mt(y),void t.serviceWorker.getRegistrations().then((function(e){var n=st(r),i=new URL(r.scope||"/",location.origin).toString();e.some((function(e){return e.scope===i&&yt(e)===n}))&&1===pe()&&e.length>0&&!t.serviceWorker.controller&&(SpeedKit.lastNavigate.responseCause=Q.HardReload)})),T?function(r,i,o,a){a&&!e.referrer&&function(t){Ne(t,{type:"get-referrer-info",clientURL:he()}).then((function(t){if(!e.referrer&&t.referrer)return Object.defineProperty(e,"referrer",{configurable:!0,get:function(){return t.referrer}})}))}(o);Ce(o,r),Me("load"),s=Object.getOwnPropertyDescriptor(Document.prototype,"cookie"),void(s&&s.configurable&&Object.defineProperty(Document.prototype,"cookie",{configurable:!0,get:function(){return s.get.call(e)},set:function(t){s.set.call(e,t),Me()}})),function(e){t[n].addEventListener("message",(function(t){var n=t.data,r=n.type,i=n.payload;"asset-response-timings"===r&&(e.lastNavigate=Object.assign(e.lastNavigate,i),Se(e))}))}(r),de()&&function(){return pe()===re.reload}()&&Fe();var s}(y,0,k,m):Ie(y);var I=function(){var e=window.location.href.indexOf("enableSpeedKit=1")>=0;e&&(sessionStorage.setItem("enableSpeedKitParam","1"),Re(!0));return e}();if(Ge()&&!I)return void Tt().catch((function(e){return B(e,L.SNIPPET)}));if(!k)return wt();C=!1,h((function(){C||(C=!0,wt())})),dt((function(){setTimeout((function(){C||(C=!0,wt())}),1e3)}));var C}()}catch(Ct){B(Ct,L.SNIPPET)}function wt(){var e=!1;bt().catch((function(t){return!e&&B(t,L.SNIPPET),e=!0,It().then((function(){return bt()}))})).then((function(){return ct(SpeedKit)})).catch((function(t){return function(e){return["The operation is insecure","A mutation operation was attempted on a database that did not allow mutations"].some((function(t){return e.indexOf(t)>-1}))||"Rejected"===e}(U(t)?t.reason.message||JSON.stringify(t.reason):t.message)?(SpeedKit.lastNavigate.responseCause=Q.SkUnsupported,Se(SpeedKit),Tt()):(!e&&B(t,L.SNIPPET),e=!0,Tt())})).catch((function(t){!e&&B(t,L.SNIPPET),e=!0}))}function bt(){var n=Oe(r.scope),i=new v(n),o=window.devicePixelRatio,a=window.screen.width,s="ontouchend"in e,c=t.userAgent,u=r.customDevice,d=u?i.set("/com.baqend.speedkit.device",{device:u,userAgent:c}):Promise.resolve();return Promise.all([i.set("/com.baqend.speedkit.config",r),i.set("/com.baqend.speedkit.screen",{dpr:o,width:a,supportsTouch:s}),i.set("/com.baqend.speedkit.cookie",{origins:[[location.origin,e.cookie]]}),kt(i),d]).then((function(){return i.disconnect()}))}function kt(e){}function Tt(){var e=new URL(r.scope||"/",location.origin).toString(),i=st(r);return t[n].getRegistrations().then((function(t){return t.forEach((function(t){var n=yt(t);t.scope===e&&n===i&&t.unregister()}))})).catch((function(){return null})).then((function(){return It()}))}function It(){return Promise.all([window.caches?caches.keys().then((function(e){var t=e.filter((function(e){return new RegExp("^"+g(s,r.scope)+".*").test(e)}));return Promise.all(t.map((function(e){return caches.delete(e)})))})):Promise.resolve(),(e=new v(r.scope),e.clear().then((function(){return e.disconnect()})))]);var e}function Nt(t){if(r[t]){if("function"!=typeof r[t])return De(r[t]);var n=r[t];r[t]=null,dt((function(){try{var r="detectDevice"===t?e:void 0,i=n.call(null,r);Promise.resolve(i).then((function(e){e&&"string"==typeof e&&De(e)})).catch((function(e){B(e,L.CONFIG)}))}catch(Ct){B(Ct,L.CONFIG)}}))}}}(document,navigator,"serviceWorker","undefined"!=typeof speedKit?speedKit:config,"SNIPPET_LOADED");